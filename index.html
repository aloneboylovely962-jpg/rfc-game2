<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>RFC Unreal Style Battle</title>
<style>
body{margin:0;overflow:hidden;background:black;}
#ui{
position:absolute;
top:10px;
width:100%;
color:white;
font-family:Arial;
display:flex;
justify-content:space-around;
z-index:10;
font-size:18px;
}
button{
position:absolute;
bottom:20px;
left:50%;
transform:translateX(-50%);
padding:12px 30px;
font-size:20px;
background:linear-gradient(45deg,#ff512f,#dd2476);
border:none;
color:white;
border-radius:30px;
}
</style>
</head>
<body>

<div id="ui">
<div id="score">Score: 0</div>
<div id="lives">Lives: 3</div>
</div>

<button onclick="startGame()">START AAA BATTLE</button>

<script src="https://cdn.jsdelivr.net/npm/three@0.158.0/build/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.158.0/examples/js/postprocessing/EffectComposer.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.158.0/examples/js/postprocessing/RenderPass.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.158.0/examples/js/postprocessing/UnrealBloomPass.js"></script>

<script>
let scene,camera,renderer,composer;
let foods=[];
let score=0,lives=3;
let speed=0.08;
let started=false;

scene=new THREE.Scene();
scene.fog=new THREE.Fog(0x000000,10,50);

camera=new THREE.PerspectiveCamera(75,window.innerWidth/window.innerHeight,0.1,1000);
camera.position.set(0,5,12);
camera.lookAt(0,0,0);

renderer=new THREE.WebGLRenderer({antialias:true});
renderer.setSize(window.innerWidth,window.innerHeight);
renderer.shadowMap.enabled=true;
document.body.appendChild(renderer.domElement);

let ambient=new THREE.AmbientLight(0xffffff,0.4);
scene.add(ambient);

let light=new THREE.DirectionalLight(0xffffff,1);
light.position.set(5,10,5);
light.castShadow=true;
scene.add(light);

let floorGeo=new THREE.PlaneGeometry(50,50);
let floorMat=new THREE.MeshStandardMaterial({color:0x111111});
let floor=new THREE.Mesh(floorGeo,floorMat);
floor.rotation.x=-Math.PI/2;
floor.receiveShadow=true;
scene.add(floor);

composer=new THREE.EffectComposer(renderer);
composer.addPass(new THREE.RenderPass(scene,camera));
let bloom=new THREE.UnrealBloomPass(new THREE.Vector2(window.innerWidth,window.innerHeight),1.5,0.4,0.85);
composer.addPass(bloom);

function spawnFood(){
let geo=new THREE.TorusKnotGeometry(0.7,0.3,100,16);
let mat=new THREE.MeshStandardMaterial({
color:Math.random()*0xffffff,
metalness:0.6,
roughness:0.3
});
let mesh=new THREE.Mesh(geo,mat);
mesh.position.set((Math.random()-0.5)*12,1,-30);
mesh.castShadow=true;
scene.add(mesh);
foods.push(mesh);
}

function startGame(){
document.querySelector("button").style.display="none";
started=true;
setInterval(spawnFood,1200);
}

function animate(){
requestAnimationFrame(animate);

if(started){
foods.forEach((food,index)=>{
food.position.z+=speed;
food.rotation.x+=0.02;
food.rotation.y+=0.02;

if(food.position.z>5){
scene.remove(food);
foods.splice(index,1);
lives--;
document.getElementById("lives").innerHTML="Lives: "+lives;
if(lives<=0){
alert("GAME OVER | Score: "+score);
location.reload();
}
}
});
}

composer.render();
}
animate();

window.addEventListener("click",function(event){
let mouse=new THREE.Vector2(
(event.clientX/window.innerWidth)*2-1,
-(event.clientY/window.innerHeight)*2+1
);

let raycaster=new THREE.Raycaster();
raycaster.setFromCamera(mouse,camera);
let intersects=raycaster.intersectObjects(foods);

if(intersects.length>0){
scene.remove(intersects[0].object);
foods.splice(foods.indexOf(intersects[0].object),1);
score+=20;
document.getElementById("score").innerHTML="Score: "+score;
}
});
</script>
</body>
</html>
